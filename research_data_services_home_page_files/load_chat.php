var springSpace = springSpace || {};

(function(){
	if (!window.console) {
		var noOp = function(){};
		console = { log: noOp, warn: noOp, error: noOp };
	}
	var chat_div, chat_load, chat_timer, chat_self_triggered, chat_button, qs;
	var libchat_options = {"id":"4761","iid":"779","hash":"d51e38627705fc23934afaba4f563cc8","name":"University Libraries (drupal)","ts":"2014-07-16T11:53:12.641Z","uid":15190,"ref":"","key":"899beea9655c596","chat_title":"Ask A Librarian","byeMsg":"Thanks for chatting!","dept_label":"Select Department:","name_label":"Your name or email","name_default":"","guest_label":"Guest","width":"100%","height":340,"is_personal":false,"chat_button":"Ask!","done_button":"Chat again","press_enter":"Press ENTER to send","offline_text":"Ask A Librarian","offline_title":"Chat is offline","slidebutton_url":"","slidebutton_position":"r","slidebutton_bcolor":"#356ED7","slidebutton_width":"","slidebutton_height":"","la_hide":true,"la_hide_msg":"Sorry, chat is offline. Search for your answers or submit your question by email.","la_hide_msg2":"","la_search_opt":{"group_id":0,"button":"Search","placeholder":"","label":""},"la_search_box":"","sound_on":"Sound is On (click to toggle)","sound_off":"Sound is Off (click to toggle)","star_text":"Please rate this chat:","trans":"Enter an email address to send this chat transcript to:","error_sess":"Error starting session.","error_send":"Error sending this message.","error_tran":"Error sending transcript.","left":" has left the chat","typing":" is typing...","joined":" has joined the chat","initial_question":true,"initial_question_label":"Need software help instead? <br \/>Contact <a target=\"_blank\" href=\"http:\/\/techtutors.psu.edu\/help\">Tech Tutors<\/a> (Sun-Thu 1-10pm EST).<br \/> <br \/><h2>Ask us!<\/h2>","comments_label":"Any comments?","comments_button_text":"Submit Feedback","enable_anon":false,"enable_comments":true,"enable_sound":false,"star_ratings":true,"file_uploads":false,"file_title":"Upload File","file_intro":"Note: Maximum file size is 5MB. File is removed after one month, it is not kept permanently.","file_label":"Attach a file","file_action":"Upload","cancel_button":"Cancel","css":"","custom_css":".libchat_online {background: red;}\n#libchat_btn_widget {\nbackground: red;\ndisplay: block;\nposition: fixed;\ntop: 20%;\nright: 0;\nheight: 170px;\nwidth: 36px;\n}\n\n#libchat_btn_widget:hover {\nborder: 6px solid #395773;\n}\n\n.libchat_offline {\ndisplay:none;\n}","color_backg":"#f9f9f9","color_border":"#eeeeee","color_head":"#3278E0","color_btn":"#FFFFFF","user1":{"tag":1,"name":"click to edit","id":0,"show":0,"required":0,"type":"t","val":""},"user2":{"tag":2,"name":"click to edit","id":0,"show":0,"required":0,"type":"t","val":""},"user3":{"tag":3,"name":"click to edit","id":0,"show":0,"required":0,"type":"t","val":""},"user4":{"tag":4,"name":"click to edit","id":0,"show":0,"required":0,"type":"t","val":""},"user5":{"tag":5,"name":"click to edit","id":0,"show":0,"required":0,"type":"t","val":""},"error_off":"Sorry it doesn't appear any librarians are online... Please try again later.","wait":"Please wait... A librarian will connect shortly!","depart_id":"25","depart_dedicated":true,"depart_default_id":"25","widget_type":1,"wtype":1,"offline_url":"https:\/\/www.libraries.psu.edu\/ask","slidebutton_url_off":"","slidebutton_color":"#FAFAFA","slidebutton_text":"<span class=\"ask__part1\">Ask <i class=\"fa fa-comments\"><\/i><\/span><br>a Librarian","slidebutton_text_off":"<span class=\"ask__part1\">Ask <i class=\"fa fa-comments\"><\/i><\/span><br>a Librarian","email_trans":"View\/Email Transcript","rate_1":"Bad","rate_2":"So-So","rate_3":"Good","rate_4":"Great","submit_button":"Submit","autoload_time":0,"autoload_head":"Do you need help?","autoload_text":"A librarian is online ready to help.","autoload_yes":"Chat Now","autoload_no":"No Thanks","isBuilding":true,"missedchat_time":"75","missedchat_message":"We apologize for the delay. Don't want to wait?","missedchat_link":"Submit your question now and receive a reply by email.","missedchat_queue":"84","fbwidget":false,"autopop":false,"peel":"","skip_login":false,"nologin_message":"Type your question in the box below and press Enter to start chatting.","error_message":"Sorry, it looks like you're having a connection issue. Would you like to submit your question for email follow-up?","error_link":"Submit your question.","error_queue":0,"away_message":"Chat is online but the operator is temporarily away. If you don't want to wait, you can submit your question for email follow-up.","away_link":"Submit your question.","away_queue":0,"reload_button":"Recheck Status","slidebutton_bcolor_off":"#356ED7","slidebutton_color_off":"#FAFAFA","valid_form_q":"Please enter your question.","valid_form_n":"Please enter your name.","base_domain":"v2.libanswers.com","onlinerules":[{"d":25,"u":0}]};
	var cascadeServer = "https:\/\/cascade2.libchat.com";
	var loaded = false;
	function checkStatus(){JSONP.init({error:function(ex){console.log("Failed to load : "+ex.url),setStatus(!1)}}),JSONP.get(cascadeServer+"/widget_status",{iid:libchat_options.iid,rules:JSON.stringify(libchat_options.onlinerules)},function(data){var online=!1;(data.u||data.d)&&(online=!0),setStatus(online)})}function insertWidgetCSS(){libchat_options.slidebutton_color_off&&""!==libchat_options.slidebutton_color_off||(libchat_options.slidebutton_color_off=libchat_options.slidebutton_color),libchat_options.slidebutton_bcolor_off&&""!==libchat_options.slidebutton_bcolor_off||(libchat_options.slidebutton_bcolor_off=libchat_options.slidebutton_bcolor),("number"==typeof libchat_options.slidebutton_width||"string"==typeof libchat_options.slidebutton_width&&-1===libchat_options.slidebutton_width.indexOf("%"))&&(libchat_options.slidebutton_width=parseInt(libchat_options.slidebutton_width,10)+"px"),("number"==typeof libchat_options.slidebutton_height||"string"==typeof libchat_options.slidebutton_height&&-1===libchat_options.slidebutton_height.indexOf("%"))&&(libchat_options.slidebutton_height=parseInt(libchat_options.slidebutton_height,10)+"px"),""===libchat_options.color_backg&&(libchat_options.color_backg="#fff");var id="#"+chat_div.id,css="/* LibChat Widget CSS */ "+id+" img { width: "+libchat_options.slidebutton_width+"; height: "+libchat_options.slidebutton_height+"; } "+id+" button { display: inline-block; padding: 6px 12px; margin-bottom: 0; text-align: center; white-space: nowrap; vertical-align: middle; cursor: pointer; background-image: none; border: 1px solid transparent; border-radius: 4px; background-color: "+libchat_options.slidebutton_bcolor_off+"; color: "+libchat_options.slidebutton_color_off+"; } "+id+" button.libchat_online { background-color: "+libchat_options.slidebutton_bcolor+"; color: "+libchat_options.slidebutton_color+"; }";css+="div[data-a11y-dialog-hide] { position: fixed; background-color: rgb(0, 0, 0); top: 0; left: 0; bottom: 0; right: 0; opacity: 0.3; z-index: 500; }",css+="#libchat_modal_"+libchat_options.id+"{ position: fixed; top: 0; left: 0; bottom: 0; right: 0; font-size: 100%; } #libchat_modal_"+libchat_options.id+'[aria-hidden="true"] { display: none; }',css+="#libchat_modal_"+libchat_options.id+" div[role=dialog] { position: relative; z-index: 501; margin: 50px auto; width: 300px; background-color: "+libchat_options.color_backg+"; padding: 1em; border-radius: 5px; }",css+="#libchat_modal_"+libchat_options.id+" h1 { color: "+libchat_options.color_head+"; font-size: 2em; margin: 0 0 0.5em 0; padding: 0; line-height: 1.2em; } #libchat_modal_"+libchat_options.id+" button { color: "+libchat_options.color_btn+"; background-color: "+libchat_options.color_head+"; margin: 1em 1em 0 0; border: none; border-radius: 5px; padding: 0.5em 1em; font-size: 1em; }";var head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");if(style.type="text/css",style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css)),head.appendChild(style),""!==libchat_options.css)if(document.createStyleSheet)try{document.createStyleSheet(libchat_options.css)}catch(e){}else{var css_tag=document.createElement("link");css_tag.setAttribute("rel","stylesheet"),css_tag.setAttribute("type","text/css"),css_tag.setAttribute("href",libchat_options.css),(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(css_tag)}}function start(){!0!==loaded&&(loaded=!0,"string"==typeof libchat_options.width&&-1!==libchat_options.width.indexOf("%")&&(libchat_options.width="400"),"string"==typeof libchat_options.height&&-1!==libchat_options.height.indexOf("%")&&(libchat_options.height=parseInt(libchat_options.height,10)),chat_div=document.querySelector("#libchat_"+libchat_options.hash+", #libchat_btn_widget, #libchat_d2o_widget"),insertWidgetCSS(),checkStatus(),libchat_options.autoload_time&&parseInt(libchat_options.autoload_time,10)>0&&(chat_timer=window.setTimeout(function(){chat_self_triggered=!0,checkStatus()},1e3*parseInt(libchat_options.autoload_time,10))))}function setStatus(online){if(!1===online&&!0===chat_self_triggered)return void(chat_self_triggered=!1);if(!0===chat_self_triggered){if(chat_self_triggered=!1,autoPopDenied())return;if("undefined"==typeof A11yDialog)return;var modal=document.createElement("div");modal.setAttribute("aria-hidden","true"),modal.id="libchat_modal_"+libchat_options.id;var overlay=document.createElement("div");overlay.setAttribute("tabindex","-1"),overlay.setAttribute("data-a11y-dialog-hide","true");var dialog=document.createElement("div");dialog.setAttribute("role","dialog"),dialog.setAttribute("aria-labelledby","libchat_modal_title");var dialog_body=document.createElement("div");dialog_body.setAttribute("role","document");var dialog_title=document.createElement("h1");dialog_title.id="libchat_modal_title",dialog_title.setAttribute("tabindex",0),dialog_title.innerHTML=libchat_options.autoload_head;var dialog_text=document.createElement("div");dialog_text.id="autoload_text",dialog_text.innerHTML=libchat_options.autoload_text;var dialog_btns=document.createElement("div");dialog_btns.id="autoload_btn";var dialog_yes=document.createElement("button");dialog_yes.setAttribute("type","button"),dialog_yes.innerHTML=libchat_options.autoload_yes;var dialog_no=document.createElement("button");dialog_no.setAttribute("type","button"),dialog_no.innerHTML=libchat_options.autoload_no,dialog_no.setAttribute("data-a11y-dialog-hide","true"),dialog_btns.appendChild(dialog_yes),dialog_btns.appendChild(dialog_no),dialog_body.appendChild(dialog_title),dialog_body.appendChild(dialog_text),dialog.appendChild(dialog_body),dialog.appendChild(dialog_btns),modal.appendChild(overlay),modal.appendChild(dialog),document.body.appendChild(modal);var allydialog=new A11yDialog(modal,chat_div);return dialog_yes.addEventListener("click",function(e){window.open(qs,"libchat","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, copyhistory=no, width="+libchat_options.width+", height="+libchat_options.height),allydialog.hide(),modal.parentNode.removeChild(modal),saveAutoPopDeny()}),dialog_no.addEventListener("click",function(e){modal.parentNode.removeChild(modal),saveAutoPopDeny()}),void allydialog.show()}qs="https://"+libchat_options.base_domain+"/chati.php?",qs+="hash="+libchat_options.hash,window.document.title&&(qs+="&referer_title="+encodeURIComponent(window.document.title));var img=document.createElement("img");img.className="libchat_btn_img";var link=document.createElement("a");online?(qs+="&referer="+encodeURIComponent(window.location.href),""!==libchat_options.slidebutton_url?(img.setAttribute("src",libchat_options.slidebutton_url),img.setAttribute("alt",libchat_options.slidebutton_text),link.setAttribute("href","#"),link.appendChild(img)):(link=document.createElement("button"),link.innerHTML=libchat_options.slidebutton_text,link.className="libchat_online"),link.addEventListener("click",function(e){e.preventDefault(),clearTimeout(chat_timer),window.open(qs,"libchat","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, copyhistory=no, width="+libchat_options.width+", height="+libchat_options.height)})):""!==libchat_options.slidebutton_url_off?(img.setAttribute("src",libchat_options.slidebutton_url_off),img.setAttribute("alt",libchat_options.slidebutton_text_off),""==libchat_options.offline_url?link.addEventListener("click",function(e){e.preventDefault(),clearTimeout(chat_timer),window.open(qs,"libchat","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, copyhistory=no, width="+libchat_options.width+", height="+libchat_options.height)}):link.setAttribute("href",libchat_options.offline_url),link.appendChild(img)):(link=document.createElement("button"),link.innerHTML=libchat_options.slidebutton_text_off,link.className="libchat_offline",link.addEventListener("click",function(e){e.preventDefault(),clearTimeout(chat_timer),""==libchat_options.offline_url?window.open(qs,"libchat","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, copyhistory=no, width="+libchat_options.width+", height="+libchat_options.height):window.location.href=libchat_options.offline_url})),chat_div.appendChild(link)}var JSONP=function(){function load(url,pfnError){var script=document.createElement("script"),done=!1;script.src=url,script.async=!0;var errorHandler=pfnError||config.error;"function"==typeof errorHandler&&(script.onerror=function(ex){errorHandler({url:url,event:ex})}),script.onload=script.onreadystatechange=function(){done||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(done=!0,script.onload=script.onreadystatechange=null,script&&script.parentNode&&script.parentNode.removeChild(script))},head||(head=document.getElementsByTagName("head")[0]),head.appendChild(script)}function encode(str){return encodeURIComponent(str)}function jsonp(url,params,callback,callbackName){var key,query=-1===(url||"").indexOf("?")?"?":"&";callbackName=callbackName||config.callbackName||"callback";var uniqueName=callbackName+"_json"+libchat_options.hash;params=params||{};for(key in params)params.hasOwnProperty(key)&&(query+=encode(key)+"="+encode(params[key])+"&");return window[uniqueName]=function(data){callback(data);try{delete window[uniqueName]}catch(e){}window[uniqueName]=null},load(url+query+callbackName+"="+uniqueName),uniqueName}function setDefaults(obj){config=obj}var head,window=this,config={};return{get:jsonp,init:setDefaults}}(),saveAutoPopDeny=function(){var obj={date:Math.floor(Date.now()/1e3)};try{localStorage.setItem("libchat_auto",JSON.stringify(obj))}catch(e){}},autoPopDenied=function(){try{var obj=localStorage.getItem("libchat_auto");if(""===obj)return!1;obj=JSON.parse(obj);return!(Math.floor(Date.now()/1e3)-obj.date>300)||(deleteAutoPopDeny(),!1)}catch(e){deleteAutoPopDeny()}return!1},deleteAutoPopDeny=function(){try{localStorage.removeItem("libchat_auto")}catch(e){}};"complete"===document.readyState||"interactive"===document.readyState?start():(document.addEventListener("DOMContentLoaded",start,!1),window.addEventListener("load",start,!1));
})();